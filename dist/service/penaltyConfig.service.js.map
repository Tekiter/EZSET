{"version":3,"sources":["../../src/service/penaltyConfig.service.js"],"names":["PenaltyConfigService","createPenaltyConfig","req","key","value","body","result","PenaltyConfigDao","err","handleError","deletePenaltyConfig","_id","params","type_id","penaltyConfig","getPenaltyConfig","n","res","PenaltyDao","deletePenaltys","getPenaltyConfigs","updatePenaltyConfig","console","log"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AAEO,MAAMA,oBAAN,CAA2B;QAArBA,oB,GAAAA,oB;;AAAAA,oB,CACJC,mB,GAAsB,MAAMC,GAAN,IAAY;AACrC,UAAM,EAACC,GAAD,EAAMC,KAAN,KAAeF,IAAIG,IAAzB;AACA,QAAG;AACD,cAAMC,SAAS,MAAMC,gCAAiBN,mBAAjB,CAAqCE,GAArC,EAAyCC,KAAzC,CAArB;AACA,eAAOE,MAAP;AACD,KAHD,CAGC,OAAME,GAAN,EAAU;AACP,cAAM,IAAIC,kBAAJ,CAAgB,GAAhB,EAAoB,2BAApB,CAAN;AACH;AACJ,C;;AATUT,oB,CAWJU,mB,GAAsB,MAAMR,GAAN,IAAY;AACvC,UAAM,EAACS,GAAD,KAAQT,IAAIU,MAAlB;AACA,UAAMC,UAAUF,GAAhB;AACA,UAAMG,gBAAgB,MAAMP,gCAAiBQ,gBAAjB,CAAkCJ,GAAlC,CAA5B;;AAEA,QAAIG,cAAcX,GAAd,IAAqB,IAArB,IAA6BW,cAAcX,GAAd,IAAqB,IAAtD,EAA4D;AACxD,cAAM,IAAIM,kBAAJ,CAAgB,GAAhB,EAAoB,iBAApB,CAAN;AACH;;AAED,QAAG;AACC,cAAMH,SAAS,MAAMC,gCAAiBG,mBAAjB,CAAqCC,GAArC,CAArB;AACA,YAAGL,OAAOU,CAAP,IAAY,CAAf,EAAiB;AACb,kBAAM,IAAIP,kBAAJ,CAAgB,GAAhB,EAAoB,yBAApB,CAAN;AACH,SAFD,MAEK;AACD,kBAAMQ,MAAM,MAAMC,oBAAWC,cAAX,CAA0BN,OAA1B,CAAlB;AACA,mBAAOI,GAAP;AACH;AACJ,KARD,CAQC,OAAMT,GAAN,EAAU;AACP,cAAM,IAAIC,kBAAJ,CAAgB,GAAhB,EAAoB,2BAApB,CAAN;AACH;AACA,C;;AA/BQT,oB,CAkCFoB,iB,GAAoB,MAAMlB,GAAN,IAAY;AACrC,QAAG;AACD,cAAMI,SAAS,MAAMC,gCAAiBa,iBAAjB,EAArB;AACA,eAAOd,MAAP;AACD,KAHD,CAGC,OAAME,GAAN,EAAU;AACP,cAAM,IAAIC,kBAAJ,CAAgB,GAAhB,EAAoB,yBAApB,CAAN;AACH;AACF,C;;AAzCQT,oB,CA2CFqB,mB,GAAsB,MAAMnB,GAAN,IAAY;AACrC,UAAM,EAACS,GAAD,KAAQT,IAAIU,MAAlB;AACA,UAAM,EAACR,KAAD,KAAUF,IAAIG,IAApB;AACA,QAAG;AACC,cAAMS,gBAAgB,MAAMP,gCAAiBQ,gBAAjB,CAAkCJ,GAAlC,CAA5B;AACA,YAAGG,kBAAkB,IAArB,EAA0B;AACtB,kBAAM,IAAIL,kBAAJ,CAAgB,GAAhB,EAAoB,yBAApB,CAAN;AACH;AACD,cAAMH,SAAS,MAAMC,gCAAiBc,mBAAjB,CAAqCV,GAArC,EAA0CP,KAA1C,CAArB;AACA,eAAOE,MAAP;AACH,KAPD,CAOC,OAAME,GAAN,EAAU;AACPc,gBAAQC,GAAR,CAAYf,GAAZ;AACA,cAAM,IAAIC,kBAAJ,CAAgB,GAAhB,EAAoB,2BAApB,CAAN;AACH;AACJ,C","file":"penaltyConfig.service.js","sourcesContent":["import { PenaltyConfigDao } from '../dao/penaltyConfig.dao';\nimport { PenaltyDao } from '../dao/penalty.dao'\nimport { handleError } from '../models/Error';\n\nexport class PenaltyConfigService {\n  static createPenaltyConfig = async(req)=>{\n      const {key, value} = req.body;\n      try{\n        const result = await PenaltyConfigDao.createPenaltyConfig(key,value);\n        return result;\n      }catch(err){\n          throw new handleError(404,'Create PenaltyConfig fail');\n      }\n  };\n\n  static deletePenaltyConfig = async(req)=>{\n    const {_id} = req.params;\n    const type_id = _id;\n    const penaltyConfig = await PenaltyConfigDao.getPenaltyConfig(_id);\n\n    if (penaltyConfig.key == '지각' || penaltyConfig.key == '결석') {\n        throw new handleError(400,'삭제할 수 없는 항목입니다.');\n    }\n\n    try{\n        const result = await PenaltyConfigDao.deletePenaltyConfig(_id);\n        if(result.n == 0){\n            throw new handleError(404,'PenaltyConfig not found');\n        }else{\n            const res = await PenaltyDao.deletePenaltys(type_id);\n            return res;\n        }\n    }catch(err){\n        throw new handleError(404,'delete PenaltyConfig fail');\n    }\n    };\n\n\n    static getPenaltyConfigs = async(req)=>{\n      try{\n        const result = await PenaltyConfigDao.getPenaltyConfigs();\n        return result;\n      }catch(err){\n          throw new handleError(404,'PenaltyConfig not found');\n      }\n    };\n\n    static updatePenaltyConfig = async(req)=>{\n        const {_id} = req.params;\n        const {value} = req.body;\n        try{\n            const penaltyConfig = await PenaltyConfigDao.getPenaltyConfig(_id);\n            if(penaltyConfig === null){\n                throw new handleError(404,'PenaltyConfig not found');\n            }\n            const result = await PenaltyConfigDao.updatePenaltyConfig(_id, value);\n            return result;\n        }catch(err){\n            console.log(err);\n            throw new handleError(404,'update PenaltyConfig fail');\n        }\n    }\n}\n"]}