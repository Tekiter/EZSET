{"version":3,"sources":["../../src/service/penalty.service.js"],"names":["PenaltyService","createPenalty","req","users","type","description","date","result","forEach","username","push","PenaltyDao","err","handleError","deletePenalty","_id","n","getPenaltys","start","end","query","getPenalty","params"],"mappings":";;;;;;;AAAA;;AACA;;AACO,MAAMA,cAAN,CAAqB;QAAfA,c,GAAAA,c;;AAAAA,c,CACJC,a,GAAgB,MAAMC,GAAN,IAAY;AAC/B,UAAM,EAACC,KAAD,EAAQC,IAAR,EAAaC,WAAb,EAAyBC,IAAzB,KAAiCJ,GAAvC;AACA,QAAG;AACC,YAAIK,SAAQ,EAAZ;AACAJ,cAAMK,OAAN,CAAc,MAAMC,QAAN,IAAkB;AAC5BF,mBAAOG,IAAP,EAAY,MAAMC,oBAAWV,aAAX,CAAyBQ,QAAzB,EAAkCL,IAAlC,EAAuCC,WAAvC,EAAmDC,IAAnD,CAAlB;AACH,SAFD;AAGA,eAAOC,MAAP;AACH,KAND,CAMC,OAAMK,GAAN,EAAU;AACP,cAAM,IAAIC,kBAAJ,CAAgB,GAAhB,EAAoB,qBAApB,CAAN;AACH;AACJ,C;;AAZUb,c,CAcJc,a,GAAgB,MAAMZ,GAAN,IAAY;AAC/B,UAAM,EAACa,GAAD,KAAQb,GAAd;AACA,QAAG;AACC,cAAMK,SAAS,MAAMI,oBAAWG,aAAX,CAAyBC,GAAzB,CAArB;AACA,YAAGR,OAAOS,CAAP,IAAY,CAAf,EAAiB;AACf,kBAAM,IAAIH,kBAAJ,CAAgB,GAAhB,EAAoB,mBAApB,CAAN;AACD;AACD,eAAON,MAAP;AACH,KAND,CAMC,OAAMK,GAAN,EAAU;AACL,cAAM,IAAIC,kBAAJ,CAAgB,GAAhB,EAAoB,qBAApB,CAAN;AACL;AACJ,C;;AAzBUb,c,CA2BJiB,W,GAAc,MAAMf,GAAN,IAAY;AAC7B,UAAM,EAACgB,KAAD,EAAOC,GAAP,KAAcjB,IAAIkB,KAAxB;AACA,QAAG;AACC,cAAMb,SAAS,MAAMI,oBAAWM,WAAX,CAAuBC,KAAvB,EAA6BC,GAA7B,CAArB;AACA,eAAOZ,MAAP;AACH,KAHD,CAGC,OAAMK,GAAN,EAAU;AACP,cAAM,IAAIC,kBAAJ,CAAgB,GAAhB,EAAoB,mBAApB,CAAN;AACH;AACJ,C;;AAnCUb,c,CAqCJqB,U,GAAa,MAAMnB,GAAN,IAAY;AAC5B,UAAM,EAACO,QAAD,KAAaP,IAAIoB,MAAvB;AACA,UAAM,EAACJ,KAAD,EAAOC,GAAP,KAAcjB,IAAIkB,KAAxB;AACA,QAAG;AACC,cAAMb,SAAS,MAAMI,oBAAWU,UAAX,CAAsBZ,QAAtB,EAA+BS,KAA/B,EAAqCC,GAArC,CAArB;AACA,eAAOZ,MAAP;AACH,KAHD,CAGC,OAAMK,GAAN,EAAU;AACP,cAAM,IAAIC,kBAAJ,CAAgB,GAAhB,EAAoB,mBAApB,CAAN;AACH;AACJ,C","file":"penalty.service.js","sourcesContent":["import { PenaltyDao } from '../dao/penalty.dao';\nimport {handleError} from '../models/Error';\nexport class PenaltyService {\n  static createPenalty = async(req)=>{\n      const {users, type,description,date} = req;\n      try{\n          let result =[];\n          users.forEach(async username => {\n              result.push(await PenaltyDao.createPenalty(username,type,description,date));\n          });\n          return result;\n      }catch(err){\n          throw new handleError(404,'Create Penalty fail');\n      }\n  };\n\n  static deletePenalty = async(req)=>{\n      const {_id} = req;\n      try{\n          const result = await PenaltyDao.deletePenalty(_id);\n          if(result.n == 0){\n            throw new handleError(404,'Penalty not found');  \n          }\n          return result;\n      }catch(err){\n            throw new handleError(404,'Delete Penalty fail');\n      }\n  }\n  \n  static getPenaltys = async(req)=>{\n      const {start,end} = req.query;\n      try{\n          const result = await PenaltyDao.getPenaltys(start,end);\n          return result;\n      }catch(err){\n          throw new handleError(404,'Penalty not found');\n      }\n  }\n\n  static getPenalty = async(req)=>{\n      const {username} = req.params;\n      const {start,end} = req.query;\n      try{\n          const result = await PenaltyDao.getPenalty(username,start,end);\n          return result;\n      }catch(err){\n          throw new handleError(404,'Penalty not found');\n      }\n  }\n}\n"]}