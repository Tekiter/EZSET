{"version":3,"sources":["../../../src/models/schema/UserSchema.js"],"names":["userSchema","mongoose","Schema","username","type","String","required","trim","unique","index","password_hash","info","Types","Mixed","default","roles","attable","Boolean","timestamp","Date","now","virtual","get","set","value","auth","hashPassword","methods","checkPassword","password"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;AAEA,MAAMA,aAAa,IAAIC,mBAASC,MAAb,CAAoB;AACnCC,cAAU;AACNC,cAAMC,MADA;AAENC,kBAAU,IAFJ;AAGNC,cAAM,IAHA;AAINC,gBAAQ,IAJF;AAKNC,eAAO;AALD,KADyB;AAQnCC,mBAAe;AACXN,cAAMC,MADK;AAEXC,kBAAU;AAFC,KARoB;AAYnCK,UAAM;AACFP,cAAMH,mBAASC,MAAT,CAAgBU,KAAhB,CAAsBC,KAD1B;AAEFC,iBAAS;AAFP,KAZ6B;AAgBnCC,WAAO;AACHX,cAAM,CAACC,MAAD;AADH,KAhB4B;;AAoBnC;AACAW,aAAS;AACLZ,cAAMa,OADD;AAELH,iBAAS;AAFJ,KArB0B;;AA0BnCI,eAAW;AACPd,cAAMe,IADC;AAEPL,iBAASK,KAAKC;AAFP;AA1BwB,CAApB,CAAnB;;AAgCApB,WACKqB,OADL,CACa,UADb,EAEKC,GAFL,CAES,YAAW;AACZ,WAAO,KAAKZ,aAAZ;AACH,CAJL,EAKKa,GALL,CAKS,UAASC,KAAT,EAAgB;AACjB,SAAKd,aAAL,GAAqBe,eAAKC,YAAL,CAAkBF,KAAlB,CAArB;AACH,CAPL;;AASAxB,WAAW2B,OAAX,CAAmBC,aAAnB,GAAmC,UAASC,QAAT,EAAmB;AAClD,WAAOJ,eAAKG,aAAL,CAAmBC,QAAnB,EAA6B,KAAKnB,aAAlC,CAAP;AACH,CAFD;;kBAIeV,U","file":"UserSchema.js","sourcesContent":["import mongoose from 'mongoose'\nimport auth from '../../utils/auth'\n\nconst userSchema = new mongoose.Schema({\n    username: {\n        type: String,\n        required: true,\n        trim: true,\n        unique: true,\n        index: true,\n    },\n    password_hash: {\n        type: String,\n        required: true,\n    },\n    info: {\n        type: mongoose.Schema.Types.Mixed,\n        default: {},\n    },\n    roles: {\n        type: [String],\n    },\n\n    // 출석 대상 유저인지 표시\n    attable: {\n        type: Boolean,\n        default: true,\n    },\n\n    timestamp: {\n        type: Date,\n        default: Date.now,\n    },\n})\n\nuserSchema\n    .virtual('password')\n    .get(function() {\n        return this.password_hash\n    })\n    .set(function(value) {\n        this.password_hash = auth.hashPassword(value)\n    })\n\nuserSchema.methods.checkPassword = function(password) {\n    return auth.checkPassword(password, this.password_hash)\n}\n\nexport default userSchema\n"]}