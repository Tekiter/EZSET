{"version":3,"sources":["../../src/models/File.js"],"names":["fileSchema","mongoose","Schema","filename","type","String","required","trim","size","Number","uploader","mimetype","hit","default","timestamp","Date","now","link","target","ref","methods","increaseHit","save","hasLink","model"],"mappings":";;;;;;AAAA;;;;;;AAEA,MAAMA,aAAa,IAAIC,mBAASC,MAAb,CAAoB;AACnC;AACAC,cAAU;AACNC,cAAMC,MADA;AAENC,kBAAU,IAFJ;AAGNC,cAAM;AAHA,KAFyB;;AAQnC;AACAC,UAAM;AACFJ,cAAMK;AADJ,KAT6B;;AAanC;AACAC,cAAU;AACNN,cAAMC;AADA,KAdyB;;AAkBnC;AACAM,cAAU;AACNP,cAAMC;AADA,KAnByB;;AAuBnC;AACAO,SAAK;AACDR,cAAMK,MADL;AAEDI,iBAAS;AAFR,KAxB8B;;AA6BnC;AACAC,eAAW;AACPV,cAAMW,IADC;AAEPF,iBAASE,KAAKC;AAFP,KA9BwB;;AAmCnCC,UAAM;AACFC,gBAAQ;AACJd,kBAAMC;AADF,SADN;AAIFc,aAAK;AACDf,kBAAMC;AADL;AAJH;AAnC6B,CAApB,CAAnB;;AA6CAL,WAAWoB,OAAX,CAAmBC,WAAnB,GAAiC,YAAW;AACxC,SAAKT,GAAL,IAAY,CAAZ;AACA,WAAO,KAAKU,IAAL,EAAP;AACH,CAHD;;AAKAtB,WAAWoB,OAAX,CAAmBG,OAAnB,GAA6B,YAAW;AACpC,QAAI,KAAKN,IAAT,EAAe;AACX,YAAI,KAAKA,IAAL,CAAUC,MAAd,EAAsB;AAClB,mBAAO,IAAP;AACH;AACJ;AACD,WAAO,KAAP;AACH,CAPD;;kBASejB,mBAASuB,KAAT,CAAe,MAAf,EAAuBxB,UAAvB,C","file":"File.js","sourcesContent":["import mongoose from 'mongoose'\n\nconst fileSchema = new mongoose.Schema({\n    // 유저가 지정한 파일 이름\n    filename: {\n        type: String,\n        required: true,\n        trim: true,\n    },\n\n    // 파일의 크기\n    size: {\n        type: Number,\n    },\n\n    // 파일을 업로드 한 사람\n    uploader: {\n        type: String,\n    },\n\n    // 파일의 mime 타입\n    mimetype: {\n        type: String,\n    },\n\n    // 파일을 다운로드한 횟수\n    hit: {\n        type: Number,\n        default: 0,\n    },\n\n    // 파일을 업로드한 시간\n    timestamp: {\n        type: Date,\n        default: Date.now,\n    },\n\n    link: {\n        target: {\n            type: String,\n        },\n        ref: {\n            type: String,\n        },\n    },\n})\n\nfileSchema.methods.increaseHit = function() {\n    this.hit += 1\n    return this.save()\n}\n\nfileSchema.methods.hasLink = function() {\n    if (this.link) {\n        if (this.link.target) {\n            return true\n        }\n    }\n    return false\n}\n\nexport default mongoose.model('File', fileSchema)\n"]}